(function(a){var h=new function(){function t(e){var d=e.pageX,e=e.pageY,b=a("#bigpicker"),g=b.offset(),f=true;if(d<g.left||d>g.left+b.width()||e<g.top||e>g.top+b.height())f=false;f||(a("#bigpicker").hide(),a(document).unbind("mousedown"))}function q(e){var a=e.offset(),b=document.compatMode=="CSS1Compat",g=b?document.documentElement.clientWidth:document.body.clientWidth,b=b?document.documentElement.clientHeight:document.body.clientHeight,f={left:a.left,top:a.top+e.height()+7};if(a.left+227>g&&(f.left=
a.left-227-7,f.left<0))f.left=0;if(a.top+e.height()+7+163>b&&(f.top=a.top-163-7,f.top<0))f.top=0;return f}function r(e){var d=a(h.targetEl).data("bigpickerCallback");a.isFunction(d)?d(h.targetEl,e):d=="undefined"?a(h.targetEl).val(e):a("#"+d).val(e)}function o(e){var a=Array(2);a[0]=[new i(e,0,0),new i(e,255,0)];a[1]=[new i(e,0,255),new i(e,255,255)];return a}function p(a,d){var b=[];b[0]=a;b[j-1]=d;for(var g=Math.round((d.r-a.r)/j),f=Math.round((d.g-a.g)/j),n=Math.round((d.b-a.b)/j),k=1;k<j-1;k++)b[k]=
new i(a.r+k*g,a.g+k*f,a.b+k*n);return b}function s(a){for(var d=Array(a),b=0,g=0;g<a;g++){var f=b+1;b+=11;d[g]=[f,b]}return d}function i(a,d,b){this.r=Math.max(Math.min(a,255),0);this.g=Math.max(Math.min(d,255),0);this.b=Math.max(Math.min(b,255),0)}function u(){for(var e=[],d=0;d<j*3+2;d++){e.push("<ul>");for(var b=0;b<j*2;b++)e.push("<li data-color='"+m[d][b]+"' style='background-color: "+m[d][b]+";' ></li>");e.push("</ul>")}a("#bigSections").html(e.join(""));a("#bigSections li").hover(function(){var b=
a(this);a("#bigLayout").css({left:b.position().left,top:b.position().top}).show();b=b.attr("data-color");a("#bigBgshowDiv").css("backgroundColor",b);a("#bigHexColorText").val(b);r(b)},function(){a("#bigLayout").hide()})}var j=6,m=Array(j*3+2);this.targetEl={};this.init=function(){for(var a=[],d=p(new i(0,0,0),new i(255,255,255)),b=0;b<d.length;b++)a[b]=d[b];a.push(new i(255,0,0),new i(0,255,0),new i(0,0,255),new i(255,255,0),new i(0,255,255),new i(255,0,255));m[0]=a;a=Array(j*2);for(b=0;b<a.length;b++)a[b]=
new i(0,0,0);m[1]=a;d=[];d.push(o(0),o(51),o(102),o(153),o(204),o(255));for(var g=0,f=[],n=[],b=0;b<d.length;b++)for(var k=p(d[b][0][0],d[b][0][1]),h=p(d[b][1][0],d[b][1][1]),a=0;a<j;a++)b<j/2?f[g]=p(k[a],h[a]):n[g-j*3]=p(k[a],h[a]),g++;for(b=0;b<f.length;b++)m[b+2]=f[b].concat(n[b]);for(b=0;b<m.length;b++)for(a=0;a<m[b].length;a++){d=m[b];g=a;f=m[b][a];n="#";for(c in f)k=f[c].toString(16).toUpperCase(),n+=k.length==1?"0"+k:k;d[g]=n}};this.showPicker=function(e,d){h.targetEl=this;a(h.targetEl).data("bigpickerCallback",
e==void 0?"undefined":e);a(h.targetEl).data("bigpickerId","bigpicker");a("#bigpicker").length<=0&&a(document.body).append('<div id="bigpicker" class="bigpicker"><ul class="bigpicker-bgview-text" ><li><div id="bigBgshowDiv"></div></li><li><input id="bigHexColorText" size="7" maxlength="7" value="#000000" /></li></ul><div id="bigSections" class="bigpicker-sections-color"></div><div id="bigLayout" class="biglayout" ></div></div>');a("#bigLayout").unbind("hover").unbind("click").hover(function(){a(this).show()},
function(){a(this).hide()}).click(function(){a("#bigpicker").hide()});a("#bigHexColorText").unbind("keypress").unbind("keyup").unbind("focus").keypress(function(){var b=a.trim(a(this).val());a(this).val(b.replace(/[^A-Fa-f0-9#]/g,""));if(!(b.length<=0)){var b=b.charAt(0)=="#"?b:"#"+b,d=7-b.length;if(d<0)b=b.substring(0,7);else if(d>0)for(var e=0;e<d;e++)b+="0";a("#bigBgshowDiv").css("backgroundColor",b)}}).keyup(function(){var b=a.trim(a(this).val());a(this).val(b.replace(/[^A-Fa-f0-9#]/g,""))}).focus(function(){this.select()});
a(this).unbind("click").bind("click",function(b){h.targetEl=b.currentTarget;b=a(h.targetEl);a("#bigBgshowDiv").css("backgroundColor","#000000");a("#bigHexColorText").val("#000000");b=q(b);a("#bigpicker").css({left:b.left+"px",top:b.top+"px"}).show();b=a("#bigSections").position();a("#bigLayout").css({left:b.left,top:b.top}).show();a(document).bind("mousedown",t)});if(d!=void 0)try{d=d.toUpperCase()}catch(b){d="P"}if(d!=void 0&&d=="L")a("#bigSections").unbind("mousemove").unbind("mouseout").unbind("click").removeClass("bigpicker-bgimage"),
u();else{a("#bigSections").addClass("bigpicker-bgimage").empty();var g=s(j*3+2),f=s(j*3);a("#bigSections").unbind("mousemove").unbind("mouseout").unbind("click").mousemove(function(b){for(var d=a(this),e=b.pageX-d.offset().left,b=b.pageY-d.offset().top,h=0,i=0,l=0;l<j*3+2;l++)if(e>=g[l][0]&&e<=g[l][1]){h=l;break}for(l=0;l<j*3;l++)if(b>=f[l][0]&&b<=f[l][1]){i=l;break}a("#bigLayout").css({left:d.position().left+h*11,top:d.position().top+i*11}).show();d=m[h][i];a("#bigBgshowDiv").css("backgroundColor",
d);a("#bigHexColorText").val(d);r(d)}).mouseout(function(){a("#bigLayout").hide()})}};this.hidePicker=function(){var e=a(h.targetEl).data("bigpickerId");a("#"+e).hide();a(document).unbind("mousedown")};this.movePicker=function(){var e=a(h.targetEl),e=q(e);a("#bigpicker").css({left:e.left+"px",top:e.top+"px"});a("#bigLayout").hide()}};h.init();a.fn.bigColorpicker=h.showPicker;a.fn.bigColorpickerMove=h.movePicker;a.fn.bigColorpickerHide=h.hidePicker})(jQuery);
